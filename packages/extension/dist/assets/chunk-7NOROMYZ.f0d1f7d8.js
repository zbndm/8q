const c="[solid-devtools]: Content Script",p="[solid-devtools]: Devtools Script",u="[solid-devtools]: Popup",N="[solid-devtools]: Devtools Panel";function g(e){let o,t={},a=!0;e.onDisconnect.addListener(s=>{a=!1,t={},s.onMessage.removeListener(i)});function i(s){if(!s||typeof s!="object")return;const r=s;if(typeof r.id!="string")return;const n=t[r.id];n?n.forEach(l=>l(r.payload)):o&&o({id:r.id,payload:r.payload,forwarding:!0})}return e.onMessage.addListener(i),{postPortMessage:(s,r)=>{!a||e.postMessage({id:s,payload:r})},onPortMessage:(s,r)=>{if(!a)return()=>{};let n=t[s];return n||(n=t[s]=[]),n.push(r),()=>t[s]=n.filter(l=>l!==r)},onForwardMessage(s){o=s}}}var M=()=>(e,o)=>postMessage({id:e,payload:o},"*"),f,d={};function E(){typeof window>"u"||addEventListener("message",e=>{let o=e.data?.id;if(typeof o!="string")return;let t=d[o];t?t.forEach(a=>a(e.data.payload)):f&&f(e.data)})}var y=()=>(e,o)=>{let t=d[e];return t||(t=d[e]=[]),t.push(o),()=>d[e]=t.filter(a=>a!==o)},O=e=>{f=e},C=e=>typeof e=="object"&&e!==null&&e.forwarding===!0&&"id"in e,P=e=>{postMessage({id:e.id,payload:e.payload},"*")};function v(e,o,t){let a=e(o,(...i)=>(a(),t(...i)));return a}export{c as C,p as D,v as M,N as P,u as a,g as c,C as g,E as i,O as l,y as p,M as r,P as y};
