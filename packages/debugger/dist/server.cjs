'use strict';

var solidJs = require('solid-js');
var scheduled = require('@solid-primitives/scheduled');
var primitives = require('@solid-devtools/shared/primitives');
var utils$1 = require('@solid-devtools/shared/utils');
var store = require('solid-js/store');
var eventBus = require('@solid-primitives/event-bus');
var eventListener = require('@solid-primitives/event-listener');
var keyboard = require('@solid-primitives/keyboard');
var utils = require('@solid-primitives/utils');
var types = require('@solid-devtools/transform/types');
var platform = require('@solid-primitives/platform');
var web = require('solid-js/web');
var cursor = require('@solid-primitives/cursor');
var bounds = require('@solid-primitives/bounds');

var Me="__$sdt-Infinity__",Ae="__$sdt-NegativeInfinity__",Le="__$sdt-NaN__",yt=(d=>(d[d.Root=0]="Root",d[d.Component=1]="Component",d[d.Effect=2]="Effect",d[d.Render=3]="Render",d[d.Memo=4]="Memo",d[d.Computation=5]="Computation",d[d.Refresh=6]="Refresh",d[d.Context=7]="Context",d[d.Signal=8]="Signal",d[d.Store=9]="Store",d))(yt||{}),ke=(i=>(i[i.Number=0]="Number",i[i.Boolean=1]="Boolean",i[i.String=2]="String",i[i.Null=3]="Null",i[i.Undefined=4]="Undefined",i[i.Symbol=5]="Symbol",i[i.Array=6]="Array",i[i.Object=7]="Object",i[i.Function=8]="Function",i[i.Getter=9]="Getter",i[i.Element=10]="Element",i[i.Instance=11]="Instance",i[i.Store=12]="Store",i))(ke||{});var Po=(e,t)=>e==="value"?"value":`${e}:${t}`;var pe=store.DEV,_=solidJs.getOwner,M=e=>"fn"in e,A=e=>"sdtType"in e?e.sdtType===4:M(e)&&$e(e),ue=e=>"owned"in e,q=e=>e.sdtType===0||!M(e),X=e=>"props"in e,Pe=e=>pe.$NAME in e,H=e=>!("observers"in e)&&pe.$NAME in e.value,$e=e=>"value"in e&&"comparator"in e&&e.pure===!0;function ht(e){let{name:t,componentName:o}=e;return o&&typeof o=="string"?o.startsWith("_Hot$$")?o.slice(6):o:t||"(unnamed)"}function Dt(e){return e.name||"(unnamed)"}var ce=e=>e[pe.$NAME]||"(unnamed)";function J(e){let t=ue(e)?ht(e):H(e)?ce(e):Dt(e);return me(t)}function me(e){return utils$1.trimString(e,16)}function fe(e){return ue(e)?ge(e):H(e)?9:8}var ge=e=>{if(typeof e.sdtType<"u")return e.sdtType;if(!M(e))return 0;if(X(e))return 1;if($e(e)){let t,o;return (t=e.owner)&&X(t)&&(o=t.componentName)&&o.startsWith("_Hot$$")?6:4}return e.pure===!1?e.user===!0?2:e.context!==null?7:3:5},wt=0,Rt=()=>(wt++).toString(36);function Q(e){return e.sdtName!==void 0?e.sdtName:e.sdtName=J(e)}function T(e,t){return e.sdtType!==void 0?e.sdtType:e.sdtType=t??ge(e)}function U(e){return e.sdtId!==void 0?e.sdtId:e.sdtId=Rt()}function Z(e){let{owned:t}=e,o;return t&&t.length===1&&T(o=t[0])===6?o:null}function _e(e){let t=le(e);return Array.isArray(t)&&!t.length&&(t=null),t}function le(e){if(typeof e=="function"&&!e.length&&e.name==="bound readSignal")return le(e());if(Array.isArray(e)){let t=[];for(let o of e){let n=le(o);n&&(Array.isArray(n)?t.push.apply(t,n):t.push(n));}return t}return e instanceof HTMLElement?e:null}function Se(e,t){e.sdtContext=t;}function He(e){for(;!e.sdtContext&&e.owner;)e=e.owner;return e.sdtContext}function Fe(e){delete e.sdtContext;}var ye=e=>_()?solidJs.onCleanup(e):e;function k(e,t,o=!1){return e.cleanups===null?e.cleanups=[t]:o?e.cleanups.splice(0,0,t):e.cleanups.push(t),()=>e.cleanups?.splice(e.cleanups.indexOf(t),1)}function je(e){return solidJs.runWithOwner(null,()=>solidJs.createRoot(e))}var $=null,F=Symbol("internal"),L=(e,t)=>{$=e;let o=solidJs.createRoot(n=>{let r=_();return Se(r,F),e(n)},t);return $===e&&($=null),o},Be=()=>{let e=!!$;return e&&($=null),e};function Ot(e){let t=new Set,o=[];for(let n=e.length-1;n>=0;n--){let r=e[n];t.has(r.id)||(t.add(r.id),o.push(r));}return o}function We(e){let t=[],o=scheduled.throttle(()=>{let n=Ot(t);t.length=0,e(n);});return n=>{t.push(n),o();}}var ee=new Set;{let e=()=>ee.forEach(t=>t());typeof window._$afterUpdate=="function"&&ee.add(window._$afterUpdate),window._$afterUpdate=e;}function Ke(e){return ee.add(e),ye(()=>{ee.delete(e);})}var te=new Set;{let e=t=>{Be()||te.forEach(o=>o(t));};typeof window._$afterCreateRoot=="function"&&te.add(window._$afterCreateRoot),window._$afterCreateRoot=e;}function Ge(e){return te.add(e),ye(()=>te.delete(e))}function Ye(e,t){if(e.onComputationUpdate)return void(e.onComputationUpdate=t);e.onComputationUpdate=t,Ut(e,o=>{solidJs.untrack(e.onComputationUpdate),o();});}function Ut(e,t){let o=e.fn,n,r,s=()=>n=o(r);e.fn=e.fn.length?l=>(t(s,r=l),n):()=>(t(s,void 0),n);}function Ie(e,t,o){if(e.onValueUpdate){e.onValueUpdate[o]=t;return}let n=e.onValueUpdate={[o]:t},r=e.value;Object.defineProperty(e,"value",{get:()=>r,set:s=>{for(let l of Object.getOwnPropertySymbols(n))n[l](s,r);r=s;}});}function oe(e,t){e.onValueUpdate&&delete e.onValueUpdate[t];}var ne,be,ze,ve=[],j;function Ce(e,t){let{owned:o}=e;if(!o||!o.length)return t;let n=Array(o.length);for(let r=0;r<n.length;r++)n[r]=Mt(o[r]);return t.children=n,t}function Tt(e,t,o){Ye(e,ze.bind(void 0,be,t)),(!e.sources||e.sources.length===0)&&(o.frozen=!0);}function Mt(e){let t=T(e),o=U(e),n=t===1||t===4||t===2||t===5?Q(e):void 0,r={id:o,type:t};if(n&&(r.name=n),o===ne&&(j=e),t===1){let s;if(n==="provider"&&e.owned&&e.owned.length===1&&T(s=e.owned[0])===7){let m=U(s);return m===ne&&(j=s),Ce(s.owned[0],{id:m,type:7})}let l=_e(e.value);l&&ve.push({id:o,name:n,element:l});let a,u;n==="Show"&&e.owned?.length===2&&A(a=e.owned[0])&&A(u=e.owned[1])&&(a.name="condition",u.name="value");let c;n==="For"&&e.owned?.length===1&&A(c=e.owned[0])&&(c.name="value");let d=!1,S=Z(e);S&&(d=!0,e=S),r.hmr=d;}else t!==7&&Tt(e,o,r);return Ce(e,r)}function At(e,t,o){t===ne&&(j=e);let n={id:t,type:0};return Ce(e,n),o&&(n.attached=U(o)),n}function Xe(e,t){return ne=t.inspectedId,be=t.rootId,ze=t.onComputationUpdate,j=null,ve=[],{root:At(e,be,e.sdtAttached),inspectedOwner:j,components:ve}}var Pt=/^((?:\\?[^\s][^/\\:\"\?\*<>\|]+)+):([0-9]+):([0-9]+)$/,$t=/^((?:(?:\.\/|\.\.\/|\/)?(?:\.?\w+\/)*)(?:\.?\w+\.?\w+)):([0-9]+):([0-9]+)$/,Je=platform.isWindows?Pt:$t;function Ne(e){let t=e.getAttribute(types.LOCATION_ATTRIBUTE_NAME);if(!(!t||!Je.test(t)))return t}var _t={vscode:({projectPath:e,filePath:t,line:o,column:n})=>`vscode://file/${e}/${t}:${o}:${n}`,"vscode-insiders":({projectPath:e,filePath:t,line:o,column:n})=>`vscode-insiders://file/${e}/${t}:${o}:${n}`,atom:({projectPath:e,filePath:t,line:o,column:n})=>`atom://core/open/file?filename=${e}/${t}&line=${o}&column=${n}`,webstorm:({projectPath:e,filePath:t,line:o,column:n})=>`webstorm://open?file=${e}/${t}&line=${o}&column=${n}`};function Ht(e,t){return typeof e=="function"?e(t):_t[e](t)}function xe(e,t){let o=window[types.WINDOW_PROJECTPATH_PROPERTY];if(!o)return;let n=e.match(Je);if(!n)return;let[,r,s,l]=n;return {filePath:r,line:+s,column:+l,projectPath:o,element:t}}function he(e,t){let o=Ht(e,t);typeof o=="string"&&window.open(o,"_blank");}var re=new Map,qe={};function De(e,t){qe!==e&&(re.clear(),qe=e);let o=[],n=[t],r,s;for(let l of n){if(!r){let u=Ne(l);u&&(r=u,s=l);}let a=re.get(l);if(a!==void 0)return o.forEach(u=>re.set(u,a)),a?{...a,location:r??a.location,element:s??a.element}:null;o.push(l);for(let[u,c]of Object.entries(e))for(let d=c.length-1;d>=0;d--){let S=c[d],{element:m}=S;if(Array.isArray(m)&&m.some(i=>i===l)||l===m){let i={...S,element:s??l,location:r,rootId:u};return o.forEach(g=>re.set(g,i)),i}}l.parentElement&&n.push(l.parentElement);}return null}var Bt=web.template(`<style>
.element-overlay {
  position: fixed;
  z-index: 9999;
  top: 0;
  left: 0;
  pointer-events: none;
  transition-duration: 100ms;
  transition-property: transform, width, height;
  --color: 14 116 144;
}
.border {
  position: absolute;
  top: -4px;
  left: -4px;
  right: -4px;
  bottom: -4px;
  border: 2px solid rgb(var(--color) / 0.8);
  background-color: rgb(var(--color) / 0.3);
  border-radius: 0.25rem;
}
.name-container {
  position: absolute;
  z-index: 10000;
  left: 0;
  right: 0;
  display: flex;
  justify-content: center;
  color: white;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
  font-size: 0.875rem;
  line-height: 1rem;
}
.name-container.bottom {
  top: 100%;
}
.name-container.top {
  bottom: 100%;
}
.name-animated-container {
  position: relative;
  margin: 0.5rem auto;
  padding: 0.25rem 0.5rem;
}
.name-background {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgb(var(--color) / 0.8);
  border-radius: 0.25rem;
}
.name-text {
  position: absolute;
}
.name-text span {
  color: #a5f3fc;
}
.name-invisible {
  visibility: hidden;
}
</style>`,2),Wt=web.template('<div><div class="name-animated-container"><div class="name-background"></div><div class="name-text">: <span></span></div><div class="name-invisible">: </div></div></div>',12),Kt=web.template('<div class="element-overlay"><div class="border"></div></div>',4);function Ze(e){return web.createComponent(web.Portal,{useShadow:!0,get children(){return web.createComponent(solidJs.Index,{get each(){return e()},children:t=>{cursor.createElementCursor(()=>t().element,"pointer");let o=bounds.createElementBounds(()=>t().element);return web.createComponent(Jt,web.mergeProps(o,{get tag(){return t().element.tagName.toLocaleLowerCase()},get name(){return t().name}}))}})}})}var Jt=e=>{let t=solidJs.createMemo(a=>e.left===null?a:e.left,0),o=solidJs.createMemo(a=>e.top===null?a:e.top,0),n=solidJs.createMemo(a=>e.width===null?a:e.width,0),r=solidJs.createMemo(a=>e.height===null?a:e.height,0),s=solidJs.createMemo(()=>`translate(${Math.round(t())}px, ${Math.round(o())}px)`),l=solidJs.createMemo(()=>o()>window.innerHeight/2);return [Bt.cloneNode(!0),(()=>{let a=Kt.cloneNode(!0);a.firstChild;return web.insert(a,web.createComponent(solidJs.Show,{get when(){return !!e.name},get children(){let c=Wt.cloneNode(!0),d=c.firstChild,S=d.firstChild,m=S.nextSibling,i=m.firstChild,g=i.nextSibling,b=m.nextSibling,I=b.firstChild;return web.insert(m,()=>e.name,i),web.insert(g,()=>e.tag),web.insert(b,()=>e.name,I),web.insert(b,()=>e.tag,null),web.effect(()=>web.className(c,`name-container ${l()?"top":"bottom"}`)),c}}),null),web.effect(c=>{let d=s(),S=n()+"px",m=r()+"px";return d!==c._v$&&a.style.setProperty("transform",c._v$=d),S!==c._v$2&&a.style.setProperty("width",c._v$2=S),m!==c._v$3&&a.style.setProperty("height",c._v$3=m),c},{_v$:void 0,_v$2:void 0,_v$3:void 0}),a})()]};function tt({components:e,debuggerEnabled:t,findComponent:o,getElementById:n,setLocatorEnabledSignal:r}){let s=primitives.atom(!1),l=primitives.atom(),a=solidJs.createMemo(()=>!!l()?.());r(a);let u=solidJs.createMemo(()=>t()&&(a()||s()));function c(f){s(y=>f??!y);}let d=primitives.atom(null),S=primitives.atom(null),m=solidJs.createMemo(primitives.defer([e,()=>d()??S()],([f,y])=>{if(!y)return [];if(y instanceof HTMLElement){let N=De(f,y);return N?[N]:[]}return utils.asArray(y.element).map(N=>({location:Ne(N),element:N,id:y.id,rootId:y.rootId,name:y.name}))},[]));setTimeout(()=>{L(()=>Ze(m));},1e3);let[i,g]=eventBus.createSimpleEmitter();solidJs.createEffect(f=>{let y=d();if(!y)return;let N=De(e(),y);return f&&g({nodeId:f,state:!1}),N&&g({nodeId:N.id,state:!0}),N?.id});function b(f){if(!f)return S(null);if("nodeId"in f){let{rootId:y,nodeId:N}=f,w=o(y,N);w&&S({...w,rootId:y});}else {let y=n(f.elementId);if(!y)return utils$1.warn("No element found",f);S(y);}}let I=new Set;function x(...[f,y,N]){for(let w of I)if(w(f,y,N),f.defaultPrevented)return !0}function h(f){I.add(f),utils.onRootCleanup(()=>I.delete(f));}let C;solidJs.createEffect(()=>{u()&&(primitives.makeHoverElementListener(f=>d(f)),solidJs.onCleanup(()=>d(null)),eventListener.makeEventListener(window,"click",f=>{let{target:y}=f;if(!(y instanceof HTMLElement))return;let N=m(),w=N.find(({element:St})=>y.contains(St))??N[0];if(!w)return;let se=w.location&&xe(w.location,w.element);!x(f,w,se)&&C&&se&&(f.preventDefault(),f.stopPropagation(),he(C,se));},!0));});let p=!1,v=solidJs.getOwner();function D(f){solidJs.runWithOwner(v,()=>{if(ot(),p)return utils$1.warn("useLocator can be called only once.");p=!0,f.targetIDE&&(C=f.targetIDE);let y=keyboard.createKeyHold(f.key??"Alt",{preventDefault:!0});l(()=>y);});}function R(f,y){if(!C)return utils$1.warn("Please set `targetIDE` it in useLocator options.");let N=xe(f,y);N&&he(C,N);}return {useLocator:D,togglePluginLocatorMode:c,enabledByDebugger:a,addClickInterceptor:h,setPluginHighlightTarget:b,onDebuggerHoveredComponentChange:i,openElementSourceCode:R}}function E(e,t,o,n,r=!1){if(typeof e=="number")return e===1/0?{type:0,value:Me}:e===-1/0?{type:0,value:Ae}:Number.isNaN(e)?{type:0,value:Le}:{type:0,value:e};if(typeof e=="boolean")return {type:1,value:e};if(typeof e=="string")return {type:2,value:e};if(e===null)return {type:3};if(e===void 0)return {type:4};if(typeof e=="symbol")return {type:5,value:e.description??""};if(typeof e=="function")return {type:8,value:e.name};if(e instanceof HTMLElement)return {type:10,value:{name:e.tagName,id:o.set(e)}};if(!r&&Pe(e)){let a=store.unwrap(e),u=o.set(a);return n&&n(u,a),{type:12,value:{value:E(a,t,o,void 0,!0),id:u}}}if(Array.isArray(e)){let a={type:6,value:e.length};return t&&(a.children=e.map(u=>E(u,!0,o,n,r))),a}let l=Object.prototype.toString.call(e).slice(8,-1);if(l==="Object"){let a=e,u={type:7,value:Object.keys(a).length};if(t){let c=u.children={};for(let[d,S]of Object.entries(Object.getOwnPropertyDescriptors(e)))c[d]=S.get?{type:9,value:d}:E(S.value,!0,o,n,r);}return u}return {type:11,value:l}}var po=0,P=class{obj={};map=new WeakMap;get(t){return this.obj[t]}getId(t){return this.map.get(t)}set(t){let o=this.map.get(t);return o!==void 0||(o=(po++).toString(36),this.obj[o]=t,this.map.set(t,o)),o}};var de=store.DEV,W=new WeakMap;globalThis._$onStoreNodeUpdate=(e,t,o,n)=>{let r=W.get(e);if(r)for(let s of r)s(e,t,o,n);};function rt(e,t){if(Array.isArray(e))for(let o=0;o<e.length;o++){let n=e[o];de.isWrappable(n)&&t(o.toString(),n);}else for(let o in e){let{value:n,get:r}=Object.getOwnPropertyDescriptor(e,o);!r&&de.isWrappable(n)&&t(o,n);}}function it({storePath:e,storeSymbol:t},o,n){if(t!==o||e.length!==n.length)return !1;if(e==n)return !0;for(let r=0;r<e.length;r++)if(e[r]!=n[r])return !1;return !0}function at(e,t){e=store.unwrap(e);let o=Symbol("inspect-store");return solidJs.untrack(()=>(n(e,[]),()=>r(e,[])));function n(s,l){let a=W.get(s);if(a&&a.some(c=>it(c,o,l)))return;let u=(c,d,S,m)=>{if(typeof d=="symbol")return;let i=[...l,d];solidJs.untrack(()=>{d==="length"&&typeof S=="number"&&Array.isArray(s)?t({path:l,property:d,length:S}):(de.isWrappable(m)&&r(m,i),de.isWrappable(S)&&n(S,i),t({path:l,property:d,value:S}));});};u.storePath=l,u.storeSymbol=o,a?a.push(u):W.set(s,[u]),rt(s,(c,d)=>n(d,[...l,c]));}function r(s,l){let a=W.get(s);if(!a)return;let u=a.splice(a.findIndex(c=>it(c,o,l)),1);a.length===0&&W.delete(s),u.length&&rt(s,(c,d)=>r(d,[...l,c]));}}var Ee=class{constructor(t){this.getValue=t;}trackedStores=[];selected=!1;addStoreObserver(t){this.trackedStores.push(t);}unsubscribe(){for(let t of this.trackedStores)t();this.trackedStores=[];}reset(){this.unsubscribe(),this.selected=!1;}isSelected(){return this.selected}setSelected(t){this.selected=t,t||this.unsubscribe();}},z=class{record={};get(t){return this.record[t]}add(t,o){this.record[t]=new Ee(o);}reset(){for(let t of Object.values(this.record))t.reset();}},K,G,Y=Symbol("inspector");function dt(e,t){let{value:o}=e,n=U(e),r;return G.add(`signal:${n}`,()=>e.value),H(e)?r=me(ce(o)):(r=J(e),Ie(e,s=>t(n,s),Y)),{type:fe(e),name:r,id:n,value:E(o,!1,K)}}function st(e){if(M(e)&&oe(e,Y),e.sourceMap)for(let t of Object.values(e.sourceMap))oe(t,Y);if(e.owned)for(let t of e.owned)oe(t,Y);}function lt(e,t){let{onSignalUpdate:o,onValueUpdate:n}=t;K=new P,G=new z;let r=U(e),s=T(e),l=Q(e),{sourceMap:a,owned:u}=e,c=()=>e.value,d={id:r,name:l,type:s};if(s===7){a=void 0,u=null;let m=Object.getOwnPropertySymbols(e.context);if(m.length!==1)throw new Error("Context field has more than one symbol. This is not expected.");{let i=e.context[m[0]];c=()=>i;}}let S;if(M(e)){if(X(e)){let m=Z(e);m&&(a=m.sourceMap,u=m.owned,c=()=>m.value);let i=!!e.props[solidJs.$PROXY],g={};for(let[b,I]of Object.entries(Object.getOwnPropertyDescriptors(e.props)))I.get?g[b]={type:9,value:b}:(g[b]=E(I.value,!1,K),I.value instanceof Object&&G.add(`prop:${b}`,()=>I.value));if(d.props={proxy:i,record:g},e.location&&(d.location=e.location),i){let b=Object.keys(g);S=()=>{let I=Object.keys(e.props),x=new Set(I),h=[],C=!1;for(let p of b)x.has(p)?x.delete(p):(C=!0,h.push(p));if(!(!C&&!x.size))return b=I,{added:Array.from(x),removed:h}};}}else Ie(e,n,Y);d.value=E(c(),!1,K);}if(a){let m=Object.values(a);d.signals=Array(m.length);for(let i=0;i<m.length;i++)d.signals[i]=dt(m[i],o);}else d.signals=[];if(u)for(let m of u)A(m)&&d.signals.push(dt(m,o));return G.add("value",c),{details:d,valueMap:G,nodeIdMap:K,checkProxyProps:S}}function pt(e,{eventHub:t}){let o,n,r=new P,s=new z,l,{pushStoreUpdate:a,pushValueUpdate:u,triggerPropsCheck:c,clearUpdates:d}=(()=>{let i=new Set,g=[],b=!1,I=scheduled.scheduleIdle(()=>{let h=[];for(let C of i){let p=s.get(C);if(!p||!p.getValue)continue;let v=p.isSelected(),D=E(p.getValue(),v,r,v&&S.bind(null,C,p));h.push(["value",{id:C,value:D}]);}i.clear();for(let[C,p,v]of g)h.push(["store",{valueNodeId:C,storeId:p,value:"length"in v?v.length:v.value===void 0?void 0:E(v.value,!0,r,void 0,!0),path:v.path,property:v.property}]);if(g=[],b&&l){let C=l();C&&h.push(["props",{added:C.added,removed:C.removed}]),b=!1;}h.length&&t.emit("InspectorUpdate",h);}),x=scheduled.throttle(I,200);return {pushValueUpdate(h){i.add(h),I();},pushStoreUpdate(h,C,p){g.push([h,C,p]),I();},triggerPropsCheck(){b=!0,x();},clearUpdates(){i.clear(),g=[],b=!1,I.clear(),x.clear();}}})();function S(i,g,b,I){g.addStoreObserver(at(I,x=>a(i,b,x)));}function m(i){n&&st(n),n=i,l=void 0,o=void 0,s.reset(),d(),i&&solidJs.untrack(()=>{let g=lt(i,{onSignalUpdate:b=>u(`signal:${b}`),onValueUpdate:()=>u("value")});t.emit("InspectedNodeDetails",g.details),s=g.valueMap,r=g.nodeIdMap,o=g.details,l=g.checkProxyProps;});}return solidJs.createEffect(()=>{e()&&(solidJs.onCleanup(()=>m(void 0)),Ke(()=>{l&&c();}));}),{getLastDetails:()=>o,setInspectedNode(i){if(!i)return m(void 0);let{rootId:g,nodeId:b}=i,I=ut(g,b);if(!I||!I.inspectedOwner)return m(void 0);m(I.inspectedOwner);},toggleValueNode({id:i,selected:g}){let b=s.get(i);if(!b)return utils$1.warn("Could not find value node:",i);b.setSelected(g),u(i);},getElementById(i){let g=r.get(i);if(g instanceof HTMLElement)return g}}}var O=L(()=>{let[e,t]=eventBus.createSimpleEmitter(),[o,n]=eventBus.createSimpleEmitter(),r=eventBus.createEventHub(p=>({ComputationUpdates:p(),StructureUpdates:p(),InspectorUpdate:p(),InspectedNodeDetails:p()})),[s,l,a]=(()=>{let p=primitives.atom(),v=primitives.atom(),D=primitives.atom(!1);return solidJs.createComputed(primitives.defer(solidJs.createMemo(()=>!!p()?.()||!!v()?.()),R=>{solidJs.batch(()=>{s(R),R||(c({}),x.togglePluginLocatorMode(!1),x.setPluginHighlightTarget(null),I.setInspectedNode(null));});})),[D,R=>void v(()=>R),R=>void p(()=>R)]})(),[u,c]=solidJs.createSignal({});function d(p,v){let D=u()[p];if(D){for(let R of D)if(R.id===v)return R}}function S(p){c(v=>{let D=Object.assign({},v);return delete D[p],D}),i({removed:p});}function m(p,v){c(D=>Object.assign(D,{[p.id]:v})),i({updated:p});}let i=(()=>{let p=[],v=new Set,D=scheduled.throttle(()=>{let f={};for(let y=p.length-1;y>=0;y--){let N=p[y],{id:w}=N;!v.has(w)&&!f[w]&&(f[w]=N);}r.emit("StructureUpdates",{updated:f,removed:[...v]}),p.length=0,v.clear();},50);return f=>{if("removed"in f)v.add(f.removed);else {if(v.has(f.updated.id))return;p.push(f.updated);}D();}})(),g=We(p=>{r.emit("ComputationUpdates",p);}),b=(p,v)=>{g({rootId:p,id:v});},I=pt(s,{eventHub:r}),x=tt({components:u,debuggerEnabled:s,findComponent:d,getElementById:I.getElementById,setLocatorEnabledSignal:a});function h(){let p=I.getLastDetails();!p||!p.location||x.openElementSourceCode(p.location,p.name);}function C(){return {listenTo:r.on,setUserEnabledSignal:l,triggerUpdate:t,forceTriggerUpdate:n,openInspectedNodeLocation:h,inspector:{setInspectedNode:I.setInspectedNode,toggleValueNode:I.toggleValueNode},locator:{toggleEnabled:x.togglePluginLocatorMode,enabledByDebugger:x.enabledByDebugger,addClickInterceptor:x.addClickInterceptor,setHighlightTarget:x.setPluginHighlightTarget,onHoveredComponent:x.onDebuggerHoveredComponentChange}}}return {onUpdate:e,onForceUpdate:o,enabled:s,useDebugger:C,updateRoot:m,removeRoot:S,pushComputationUpdate:b,useLocator:x.useLocator}});var Te=new Map,ut=(e,t)=>{let o=Te.get(e);return o?o.forceUpdate(t):null};function Mo(e){L(t=>{k(e,t);let o=U(e),n=(l,a)=>{e.isDisposed||(solidJs.untrack(O.enabled)&&s(),O.pushComputationUpdate(l,a));},r=primitives.untrackedCallback(l=>{if(e.isDisposed)return null;let a=Xe(e,{onComputationUpdate:n,rootId:o,inspectedId:l??null});return O.updateRoot(a.root,a.components),a}),s=scheduled.throttle(r,300);Te.set(o,{forceUpdate:r,dispose:t}),O.onUpdate(s),O.onForceUpdate(r),solidJs.createEffect(()=>{O.enabled()&&r();}),Se(e,{rootId:o,triggerRootUpdate:s,forceRootUpdate:r}),solidJs.onCleanup(()=>{Fe(e),O.removeRoot(o),e.isDisposed=!0,Te.delete(o);});});}function Ao(e=_()){let t=e;if(!t)return utils$1.warn("reatachOwner helper should be called synchronously in a reactive owner.");Lo(t,(o,n)=>{if(n!==F&&(o.sdtAttached=null,T(o,0),Mo(o),n)){n.triggerRootUpdate();let r=gt(o);if(!r.owner)return utils$1.warn("PARENT_SHOULD_BE_ALIVE");o.sdtAttached=r.owner;let s=()=>{let u=gt(o);u.owner?(r=u,o.sdtAttached=r.owner,k(r.root,s)):(o.sdtAttached=null,a());},l=k(r.root,s),a=k(o,()=>{o.isDisposed=!0,o.sdtAttached=null,l(),n.triggerRootUpdate();});}});}var ft=!1;function ot(){ft||(ft=!0,Ge(e=>Ao(e)));}function gt(e){let t=null,o=null,n=e;for(;n.owner&&!o;)n=n.owner,q(n)&&(n.isDisposed?t=n:o=n);return o?{owner:t?.owner??e.owner,root:o}:{owner:null,root:null}}function Lo(e,t){let o=[],n;do{if(q(e)){if("sdtAttached"in e){n||(n=He(e));break}if(e.sdtContext===F){n=F;break}o.push(e);}e=e.owner;}while(e);for(let r=o.length-1;r>=0;r--){let s=o[r];t(s,n),s.sdtContext&&(n=s.sdtContext);}}O.useDebugger;O.useLocator;var _r=e=>e.children,Hr=()=>{},Fr=()=>({triggerUpdate:()=>{},forceTriggerUpdate:()=>{},listenTo:()=>()=>{},setInspectedNode:()=>{},handlePropsUpdate:()=>()=>{},setInspectedSignal:()=>null,setInspectedProp:()=>{},inspectedDetails:()=>null,setInspectedValue:()=>null,setUserEnabledSignal:()=>{},openInspectedNodeLocation:()=>{},inspector:{setInspectedNode:()=>{},toggleValueNode:()=>{}},locator:{toggleEnabled:()=>{},addClickInterceptor:()=>{},enabledByDebugger:()=>!1,setHighlightTarget:()=>{},onHoveredComponent:()=>()=>{}}}),jr=()=>{},Br=()=>{},Wr=()=>{},Kr=()=>()=>{},Gr=()=>()=>{},Yr=()=>{},zr=()=>{},Xr=()=>{},qr=()=>{},Jr=()=>{},Qr=()=>{},Zr=()=>null,ei=()=>5,ti=()=>5,oi=()=>"(unnamed)",ni=e=>!1,ri=e=>!1,ii=e=>!1,ai=e=>!1,di=e=>!1,si=()=>()=>{},li=()=>()=>{},pi=()=>[],ui=solidJs.createRoot,ci=()=>null;

exports.Debugger = _r;
exports.INFINITY = Me;
exports.NAN = Le;
exports.NEGATIVE_INFINITY = Ae;
exports.NodeType = yt;
exports.ValueType = ke;
exports.attachDebugger = Hr;
exports.createInternalRoot = ui;
exports.createUnownedRoot = je;
exports.enableRootsAutoattach = jr;
exports.getFunctionSources = pi;
exports.getNodeName = oi;
exports.getNodeType = ti;
exports.getOwner = Zr;
exports.getOwnerType = ei;
exports.getValueItemId = Po;
exports.interceptComputationRerun = zr;
exports.isSolidComputation = ni;
exports.isSolidMemo = ri;
exports.isSolidOwner = ii;
exports.isSolidRoot = ai;
exports.isSolidStore = di;
exports.lookupOwner = ci;
exports.makeCreateRootListener = Gr;
exports.makeSolidUpdateListener = Kr;
exports.makeValueUpdateListener = qr;
exports.markComponentLoc = Qr;
exports.observeComputationUpdate = Yr;
exports.observeValueUpdate = Xr;
exports.onOwnerCleanup = si;
exports.onParentCleanup = li;
exports.removeValueUpdateObserver = Jr;
exports.unobserveAllRoots = Wr;
exports.useDebugger = Fr;
exports.useLocator = Br;
